<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Foody ¬∑ –õ–ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</title>
  <link rel="stylesheet" href="./style.css?v=dark2" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
  <script defer src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ru.js"></script>
  <script>window.foodyApi = (window.__FOODY__ && window.__FOODY__.FOODY_API) || window.foodyApi || 'https://foodyback-production.up.railway.app';</script>
  <script defer src="/config.js"></script>
  <script defer src="./app.js?v=city-text-1"></script>
</head>
<body>
  <div class="app">
    <header class="tg-header">
      <div class="tg-header__left">
        <div class="avatar">üçΩÔ∏è</div>
        <div class="titles">
          <div class="title">Foody</div>
          <div class="subtitle">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</div>
        </div>
      </div>
      <div class="tg-header__right">
        <button id="logoutBtn" class="btn btn-ghost" style="display:none">–í—ã–π—Ç–∏</button>
      </div>
    </header>

    <nav class="segmented" id="tabs">
      <button class="seg-btn active" data-tab="dashboard">–î–∞—à–±–æ—Ä–¥</button>
      <button class="seg-btn" data-tab="offers">–û—Ñ—Ñ–µ—Ä—ã</button>
      <button class="seg-btn" data-tab="create">–°–æ–∑–¥–∞—Ç—å</button>
      <button class="seg-btn" data-tab="profile">–ü—Ä–æ—Ñ–∏–ª—å</button>
      <button class="seg-btn" data-tab="export">–≠–∫—Å–ø–æ—Ä—Ç</button>
    </nav>

    <main class="content">
      <section class="pane active" id="dashboard">
        <div class="card">
          <div class="card-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</div>
          <p class="muted">–í–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ñ—Ñ–µ—Ä—ã –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–æ—Ñ–∏–ª–µ–º.</p>
        </div>
      </section>

      <section class="pane" id="auth">
        <div class="card card-glass">
          <div class="card-title">–í–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</div>

          <div class="auth-switch">
            <input type="radio" name="authmode" id="mode-login" checked>
            <input type="radio" name="authmode" id="mode-register">
            <div class="track"><span class="thumb"></span></div>
            <div class="labels">
              <label for="mode-login">–í—Ö–æ–¥</label>
              <label for="mode-register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</label>
            </div>
          </div>

          <div class="auth-forms">
            <form id="loginForm" class="form">
              <label>–¢–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ Email
                <input name="login" placeholder="+7 900 000 00 00 / you@cafe.com" required>
              </label>
              <label>–ü–∞—Ä–æ–ª—å
                <input name="password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
              </label>
              <div id="loginError" class="form-error hidden"></div>
              <button class="btn btn-primary" type="submit">–í–æ–π—Ç–∏</button>
            </form>

            <form id="registerForm" class="form">
              <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
                <input name="name" placeholder="–ö–∞—Ñ–µ –ü–ª—é—Å" required>
              </label>
              <label>–¢–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ Email
                <input name="login" placeholder="+7 900 000 00 00 / you@cafe.com" required>
              </label>
              <label>–ì–æ—Ä–æ–¥
                <input name="city" id="regCity" placeholder="–ù–∞–ø—Ä., –ú–æ—Å–∫–≤–∞">
              </label>
              <label class="full">–ê–¥—Ä–µ—Å (—É–ª–∏—Ü–∞, –¥–æ–º)
                <input name="address" placeholder="–ù–∞–ø—Ä., –ù–µ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç, 10">
              </label>
              <label>–ü–∞—Ä–æ–ª—å
                <input name="password" type="password" placeholder="–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤" minlength="6" required>
              </label>
              <div id="registerError" class="form-error hidden"></div>
              <button class="btn btn-primary" type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            </form>
          </div>
        </div>
      </section>

      <section class="pane" id="offers">
        <div class="card">
          <div class="card-title">–ú–æ–∏ –æ—Ñ—Ñ–µ—Ä—ã</div>
          <div id="offerList" class="table">
            <div class="skeleton"></div>
            <div class="skeleton"></div>
          </div>
        </div>
      </section>

      <section class="pane" id="create">
        <div class="card">
          <div class="card-title">–°–æ–∑–¥–∞—Ç—å –æ—Ñ—Ñ–µ—Ä</div>
          <form id="offerForm" class="form grid two">
            <label>–ù–∞–∑–≤–∞–Ω–∏–µ
              <input name="title" placeholder="–ù–∞–ø—Ä., –ù–∞–±–æ—Ä —Å—É—à–∏ ¬´–ó–∞–∫–∞—Ç¬ª" required>
            </label>
            <label>–¶–µ–Ω–∞ (‚ÇΩ / AED)
              <input name="price" type="number" min="0" step="0.01" placeholder="–ù–∞–ø—Ä., 250" required>
            </label>
            <label>–°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
              <input name="original_price" type="number" min="0" step="0.01" placeholder="–ù–∞–ø—Ä., 349">
            </label>
            <label>–û—Å—Ç–∞—Ç–æ–∫ / –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ, —à—Ç
              <input name="qty_total" type="number" min="1" step="1" value="1" required>
            </label>
            <label class="full">–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –¥–æ
              <input name="expires_at" id="expires_at" placeholder="–°–µ–≥–æ–¥–Ω—è 21:00" required>
            </label>
            <label class="full">–ö–∞—Ç–µ–≥–æ—Ä–∏—è
              <select name="category">
                <option value="ready_meal">–ì–æ—Ç–æ–≤—ã–µ –±–ª—é–¥–∞</option>
                <option value="bakery">–í—ã–ø–µ—á–∫–∞</option>
                <option value="sushi">–°—É—à–∏/—Ä–æ–ª–ª—ã</option>
                <option value="salad">–°–∞–ª–∞—Ç—ã</option>
                <option value="dessert">–î–µ—Å–µ—Ä—Ç—ã</option>
                <option value="other">–î—Ä—É–≥–æ–µ</option>
              </select>
            </label>
            <label class="full">–§–æ—Ç–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
              <input type="file" id="photo" accept="image/*">
              <input type="hidden" name="image_url" id="image_url">
            </label>
            <label class="full">
              <textarea name="description" rows="3" placeholder="–ö—Ä–∞—Ç–∫–æ: —Å–æ—Å—Ç–∞–≤, –ø–æ—Ä—Ü–∏–∏ –∏ —Ç.–ø."></textarea>
            </label>
            <div class="full" style="display:flex;gap:8px;align-items:center;justify-content:flex-end;">
              <div id="offerError" class="form-error hidden" style="margin-right:auto"></div>
              <button class="btn btn-primary" type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ñ—Ñ–µ—Ä</button>
            </div>
          </form>
        </div>
      </section>

      <section class="pane" id="profile">
        <div class="card">
          <div class="card-title">–ü—Ä–æ—Ñ–∏–ª—å —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</div>
          <form id="profileForm" class="form grid two">
            <label>–ù–∞–∑–≤–∞–Ω–∏–µ
              <input name="name" placeholder="–ö–∞—Ñ–µ –ü–ª—é—Å">
            </label>
            <label>–¢–µ–ª–µ—Ñ–æ–Ω
              <input name="phone" placeholder="+7 900 000 00 00">
            </label>
            <label>–ì–æ—Ä–æ–¥
              <input name="city" id="profileCity" placeholder="–ù–∞–ø—Ä., –ú–æ—Å–∫–≤–∞">
            </label>
            <label class="full">–ê–¥—Ä–µ—Å
              <input name="address" placeholder="–ì–æ—Ä–æ–¥, —É–ª–∏—Ü–∞, –¥–æ–º">
            </label>
            <label>–ö –∑–∞–∫—Ä—ã—Ç–∏—é –≤ (—á–∞—Å—ã:–º–∏–Ω)
              <input name="close_time" type="time" placeholder="23:00">
            </label>
            <div class="full" style="display:flex;gap:8px;justify-content:flex-end;">
              <button class="btn btn-primary" type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
          </form>
          <pre id="profileDump" class="dump small">‚Äî</pre>
        </div>
      </section>

      <section class="pane" id="export">
        <div class="card">
          <div class="card-title">–≠–∫—Å–ø–æ—Ä—Ç CSV</div>
          <p class="muted">–°–∫–∞—á–∞–π—Ç–µ –≤—ã–≥—Ä—É–∑–∫—É —Ç–µ–∫—É—â–∏—Ö –æ—Ñ—Ñ–µ—Ä–æ–≤.</p>
          <button id="downloadCsv" class="btn btn-primary">–°–∫–∞—á–∞—Ç—å CSV</button>
        </div>
        <div class="card">
          <div class="card-title">–¢–µ–∫—É—â–∏–µ –∫–ª—é—á–∏</div>
          <pre id="creds" class="dump small">‚Äî</pre>
        </div>
      </section>
    </main>

    <nav class="bottom-nav">
      <button class="nav-btn active" data-tab="dashboard" title="–î–∞—à–±–æ—Ä–¥">üè†</button>
      <button class="nav-btn" data-tab="offers" title="–û—Ñ—Ñ–µ—Ä—ã">üõçÔ∏è</button>
      <button class="nav-btn fab" data-tab="create" title="–°–æ–∑–¥–∞—Ç—å">Ôºã</button>
      <button class="nav-btn" data-tab="profile" title="–ü—Ä–æ—Ñ–∏–ª—å">üë§</button>
      <button class="nav-btn" data-tab="export" title="–≠–∫—Å–ø–æ—Ä—Ç">‚¨áÔ∏è</button>
    </nav>

    <div id="toast"></div>
  </div>
</body>
</html>
