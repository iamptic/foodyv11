<!DOCTYPE html>

<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Foody ¬∑ –õ–ö —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</title>
<link href="./style.css" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" rel="stylesheet"/>
<link href="https://unpkg.com/filepond@^4/dist/filepond.min.css" rel="stylesheet"/>
<link href="https://unpkg.com/filepond-plugin-image-preview@^4/dist/filepond-plugin-image-preview.min.css" rel="stylesheet"/>
<!-- Flatpickr & FilePond libs -->
<script defer="" src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ru.js"></script>
<script defer="" src="https://unpkg.com/filepond-plugin-image-preview@^4/dist/filepond-plugin-image-preview.min.js"></script>
<script defer="" src="https://unpkg.com/filepond-plugin-file-validate-type@^1/dist/filepond-plugin-file-validate-type.min.js"></script>
<script defer="" src="https://unpkg.com/filepond-plugin-file-validate-size@^2/dist/filepond-plugin-file-validate-size.min.js"></script>
<script defer="" src="https://unpkg.com/filepond@^4/dist/filepond.min.js"></script>
<!-- FOODY API runtime config -->
<script>window.foodyApi = (window.__FOODY__ && window.__FOODY__.FOODY_API) || window.foodyApi || 'https://foodyback-production.up.railway.app';</script>
<script defer="" src="/config.js"></script>
<script defer="" src="/web/merchant/app.js?v=auth-slider-1"></script>
<script defer="" src="./create.enhance.js"></script>
</head>
<body>
<div class="app">
<header class="tg-header">
<div class="tg-header__left">
<div class="avatar">üçΩÔ∏è</div>
<div class="titles">
<div class="title">Foody</div>
<div class="subtitle">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</div>
</div>
</div>
<div class="tg-header__right">
<button class="btn btn-ghost" id="logoutBtn">–í—ã–π—Ç–∏</button>
</div>
</header>
<nav class="segmented" id="tabs">
<button class="seg-btn active" data-tab="dashboard">–î–∞—à–±–æ—Ä–¥</button>
<button class="seg-btn" data-tab="offers">–û—Ñ—Ñ–µ—Ä—ã</button>
<button class="seg-btn" data-tab="create">–°–æ–∑–¥–∞—Ç—å</button>
<button class="seg-btn" data-tab="profile">–ü—Ä–æ—Ñ–∏–ª—å</button>
<button class="seg-btn" data-tab="export">–≠–∫—Å–ø–æ—Ä—Ç</button>
</nav>
<main class="content">
<!-- AUTH -->
<section class="pane" id="auth">
<div class="card card-glass">
<div class="card-title">–í–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</div>
<div class="auth-switch">
<input checked="" id="mode-login" name="authmode" type="radio"/>
<input id="mode-register" name="authmode" type="radio"/>
<div class="track"><span class="thumb"></span></div>
<div class="labels">
<label for="mode-login">–í—Ö–æ–¥</label>
<label for="mode-register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</label>
</div>
</div>
<div class="auth-forms">
<form class="form" id="loginForm">
<label>–¢–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ Email
                <input name="login" placeholder="+7 900 000 00 00 / you@cafe.com" required=""/>
</label>
<label>–ü–∞—Ä–æ–ª—å
                <input name="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required="" type="password"/>
</label>
<button class="btn btn-primary" type="submit">–í–æ–π—Ç–∏</button>
</form>
<form class="form" id="registerForm">
<label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
                <input name="name" placeholder="–ö–∞—Ñ–µ –ü–ª—é—Å" required=""/>
</label>
<label>–¢–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ Email
                <input name="login" placeholder="+7 900 000 00 00 / you@cafe.com" required=""/>
</label><label>–ì–æ—Ä–æ–¥<select id="citySelect" name="city" required="True"><option disabled="" selected="" value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option><option value="–ú–æ—Å–∫–≤–∞">–ú–æ—Å–∫–≤–∞</option><option value="–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥">–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</option><option value="–ö–∞–∑–∞–Ω—å">–ö–∞–∑–∞–Ω—å</option><option value="–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥">–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥</option><option value="–°–æ—á–∏">–°–æ—á–∏</option><option value="–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫">–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫</option><option value="–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥">–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥</option><option value="–û–º—Å–∫">–û–º—Å–∫</option><option value="–¢–æ–º—Å–∫">–¢–æ–º—Å–∫</option><option value="other">–î—Ä—É–≥–æ–π</option></select></label><label class="full" id="cityCustomWrap" style="display:none">–°–≤–æ–π –≥–æ—Ä–æ–¥<input id="cityCustom" name="city_custom" placeholder="–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥"/></label><label class="full">–ê–¥—Ä–µ—Å (—É–ª–∏—Ü–∞, –¥–æ–º)<input name="address" placeholder="–ù–∞–ø—Ä., –ù–µ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç, 10"/></label>
<label>–ü–∞—Ä–æ–ª—å
                <input minlength="6" name="password" placeholder="–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤" required="" type="password"/>
</label>
<button class="btn btn-primary" type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
</form>
</div>
</div>
</section>
<!-- OFFERS LIST -->
<section class="pane" id="offers">
<div class="card">
<div class="card-title">–ú–æ–∏ –æ—Ñ—Ñ–µ—Ä—ã</div>
<div class="table" id="offerList">
<div class="skeleton"></div>
<div class="skeleton"></div>
</div>
</div>
</section>
<!-- CREATE OFFER -->
<section class="pane" id="create">
<div class="card">
<div class="card-title">–°–æ–∑–¥–∞—Ç—å –æ—Ñ—Ñ–µ—Ä</div>
<form class="form grid two" id="offerForm">
<label>–ù–∞–∑–≤–∞–Ω–∏–µ
              <input name="title" placeholder="–ù–∞–ø—Ä., –ù–∞–±–æ—Ä —Å—É—à–∏ ¬´–ó–∞–∫–∞—Ç¬ª" required=""/>
</label>
<label>–¶–µ–Ω–∞ (‚ÇΩ / AED)
              <input min="0" name="price" placeholder="–ù–∞–ø—Ä., 250" required="" step="0.01" type="number"/>
</label>
<label>–°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
              <input min="0" name="original_price" placeholder="–ù–∞–ø—Ä., 349" step="0.01" type="number"/>
</label>
<label>–û—Å—Ç–∞—Ç–æ–∫ / –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ, —à—Ç
              <input min="1" name="qty_total" required="" step="1" type="number" value="1"/>
</label>
<label class="full">–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –¥–æ
              <input id="expires_at" name="expires_at" placeholder="–°–µ–≥–æ–¥–Ω—è 21:00" required=""/>
<div class="quick-group" id="quickTime" style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px;">
<button class="btn-ghost quick-btn" data-mins="30" type="button">+30 –º–∏–Ω</button>
<button class="btn-ghost quick-btn" data-mins="60" type="button">+1 —á–∞—Å</button>
<button class="btn-ghost quick-btn" data-mins="120" type="button">+2 —á–∞—Å–∞</button>
<button class="btn-ghost quick-btn" data-eod="21:00" type="button">–°–µ–≥–æ–¥–Ω—è 21:00</button>
<button class="btn-ghost quick-btn" data-close="1" type="button">–ö –∑–∞–∫—Ä—ã—Ç–∏—é</button>
</div>
<div class="hint">–ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä: 30‚Äì120 –º–∏–Ω—É—Ç, ¬´–°–µ–≥–æ–¥–Ω—è 21:00¬ª –∏–ª–∏ ¬´–ö –∑–∞–∫—Ä—ã—Ç–∏—é¬ª.</div>
<div class="hint">–¢–∞–π–º–µ—Ä —Å–∫–∏–¥–æ–∫ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —ç—Ç–æ–π —Ç–æ—á–∫–µ.</div>
</label>
<label class="full">–ö–∞—Ç–µ–≥–æ—Ä–∏—è
              <select name="category">
<option value="ready_meal">–ì–æ—Ç–æ–≤—ã–µ –±–ª—é–¥–∞</option>
<option value="bakery">–í—ã–ø–µ—á–∫–∞</option>
<option value="sushi">–°—É—à–∏/—Ä–æ–ª–ª—ã</option>
<option value="salad">–°–∞–ª–∞—Ç—ã</option>
<option value="dessert">–î–µ—Å–µ—Ä—Ç—ã</option>
<option value="other">–î—Ä—É–≥–æ–µ</option>
</select>
</label>
<label class="full">–§–æ—Ç–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
              <input accept="image/*" id="photo" type="file"/>
<input id="image_url" name="image_url" type="hidden"/>
<div class="hint">Drag&amp;drop, –ø—Ä–µ–≤—å—é, –ª–∏–º–∏—Ç —Ä–∞–∑–º–µ—Ä–∞, –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞.</div>
<div class="photo-preview hidden" id="photoPreviewWrap">
<img alt="–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä" id="photoPreview"/>
</div>
</label>
<label class="full">
<textarea name="description" placeholder="–ö—Ä–∞—Ç–∫–æ: —Å–æ—Å—Ç–∞–≤, –¥–ª—è —Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ä—Ü–∏–π –∏ —Ç.–ø." rows="3"></textarea>
</label>
<div class="full" style="display:flex;gap:8px;align-items:center;justify-content:flex-end;">
<button class="btn btn-primary" type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ñ—Ñ–µ—Ä</button>
</div>
</form>
</div>
</section>
<!-- PROFILE -->
<section class="pane" id="profile">
<div class="card">
<div class="card-title">–ü—Ä–æ—Ñ–∏–ª—å —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</div>
<form class="form grid two" id="profileForm">
<div class="form-error hidden full" id="profileError"></div><label>–ù–∞–∑–≤–∞–Ω–∏–µ
              <input name="name" placeholder="–ö–∞—Ñ–µ –ü–ª—é—Å"/>
</label>
<label>–¢–µ–ª–µ—Ñ–æ–Ω
              <input name="phone" placeholder="+7 900 000 00 00"/>
</label>
<label>–ì–æ—Ä–æ–¥<input id="profileCity" name="city" placeholder="–ù–∞–ø—Ä., –ú–æ—Å–∫–≤–∞"/></label><label class="full">–ê–¥—Ä–µ—Å
              <input name="address" placeholder="–ì–æ—Ä–æ–¥, —É–ª–∏—Ü–∞, –¥–æ–º"/>
</label>
<label>–ö –∑–∞–∫—Ä—ã—Ç–∏—é –≤ (—á–∞—Å—ã:–º–∏–Ω)
              <input name="close_time" placeholder="23:00" type="time"/>
</label>
<div class="full" style="display:flex;gap:8px;justify-content:flex-end;">
<button class="btn btn-primary" type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
</div>
</form>
<pre class="dump small" id="profileDump">‚Äî</pre>
</div>
</section>
<!-- EXPORT -->
<section class="pane" id="export">
<div class="card">
<div class="card-title">–≠–∫—Å–ø–æ—Ä—Ç CSV</div>
<p class="muted">–°–∫–∞—á–∞–π—Ç–µ –≤—ã–≥—Ä—É–∑–∫—É —Ç–µ–∫—É—â–∏—Ö –æ—Ñ—Ñ–µ—Ä–æ–≤.</p>
<button class="btn btn-primary" id="downloadCsv">–°–∫–∞—á–∞—Ç—å CSV</button>
</div>
<div class="card">
<div class="card-title">–¢–µ–∫—É—â–∏–µ –∫–ª—é—á–∏</div>
<pre class="dump small" id="creds">‚Äî</pre>
</div>
</section>
</main>
<nav class="bottom-nav">
<button class="nav-btn active" data-tab="dashboard" title="–î–∞—à–±–æ—Ä–¥">üè†</button>
<button class="nav-btn" data-tab="offers" title="–û—Ñ—Ñ–µ—Ä—ã">üõçÔ∏è</button>
<button class="nav-btn fab" data-tab="create" title="–°–æ–∑–¥–∞—Ç—å">Ôºã</button>
<button class="nav-btn" data-tab="profile" title="–ü—Ä–æ—Ñ–∏–ª—å">üë§</button>
<button class="nav-btn" data-tab="export" title="–≠–∫—Å–ø–æ—Ä—Ç">‚¨áÔ∏è</button>
</nav>
<div id="toast"></div>
</div>
<!-- Fallback tabs gate -->
<script>
    (function(){
      function $(s,r=document){return r.querySelector(s)}
      function $$(s,r=document){return Array.from(r.querySelectorAll(s))}
      function activateTab(tab){
        $$('.seg-btn').forEach(b=>b.classList.toggle('active', b.dataset.tab===tab));
        $$('.nav-btn').forEach(b=>b.classList.toggle('active', b.dataset.tab===tab));
        $$('.pane').forEach(p=>p.classList.toggle('active', p.id===tab));
      }
      try{
        const rid = localStorage.getItem('foody_restaurant_id');
        const key = localStorage.getItem('foody_key');
        const tabs = $('#tabs');
        if(!rid || !key){
          activateTab('auth');
          if(tabs) tabs.style.display='none';
          var bn = document.querySelector('.bottom-nav'); if (bn) bn.style.display='none';
        } else {
          activateTab('dashboard');
        }
      }catch(e){}
    })();
  </script>
</body>
</html>
